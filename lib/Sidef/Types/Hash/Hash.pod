
=encoding utf8

=head1 NAME

Sidef::Types::Hash:: Hash

=head1 DESCRIPTION

This class implements a hash (associative array) data type, providing key-value storage and various methods for hash manipulation, iteration, and set operations.

=head1 SYNOPSIS

    var hash = Hash(a => 1, b => 2, c => 3)
    
    say hash.keys       # Array of keys
    say hash.values     # Array of values
    say hash.len        # 3
    
    hash.each {|key, value|
        say "#{key} => #{value}"
    }
    
    # Set operations
    var h1 = Hash(a => 1, b => 2)
    var h2 = Hash(b => 3, c => 4)
    
    say (h1 | h2)   # Union
    say (h1 & h2)   # Intersection
    say (h1 - h2)   # Difference
    say (h1 ^ h2)   # Symmetric difference


=head1 INHERITS

Inherits methods from: 

       * Sidef::Object::Object

=head1 METHODS

=head2 &

    a & b

Returns the intersection of two hashes.  The result contains only keys that exist in both hashes, with values taken from the first hash. 

Aliases:  I<and>, I<intersection>

=cut

=head2 +

    a + b

Returns a new hash containing all key-value pairs from both hashes.  If a key exists in both, the value from the second hash is used. 

Aliases: I<merge>, I<concat>

=cut

=head2 -

    a - b

Returns the difference of two hashes. The result contains only keys that exist in the first hash but not in the second.

Aliases: I<sub>, I<diff>, I<difference>

=cut

=head2 ... 

    a ... b

Returns the hash as a flat list of alternating keys and values. 

Aliases: I<to_list>

=cut

=head2 ==

    a == b

Returns true if both hashes have the same keys with equal values.

Aliases: I<eq>

=cut

=head2 ^

    a ^ b

Returns the symmetric difference of two hashes.  The result contains keys that exist in either hash but not in both.

Aliases: I<xor>, I<symdiff>, I<symmetric_difference>

=cut

=head2 |

    a | b

Returns the union of two hashes. The result contains all keys from both hashes, with values from the first hash taking precedence for common keys.

Aliases: I<or>, I<union>

=cut

=head2 ≠

    a ≠ b

Returns true if the two hashes are not equal (different keys or values).

Aliases: I<!=>, I<ne>

=cut

=head2 append

    self.append(: pairs)

Appends the given key-value pairs to the hash in-place and returns the modified hash.

=cut

=head2 as_tree

    self.as_tree(root)

Returns the hash as a tree structure represented as nested Pairs, with the given root as the tree's root label.

=cut

=head2 clear

    self.clear

Removes all key-value pairs from the hash and returns the empty hash.

=cut

=head2 collect

    self.collect(block)

Iterates over each key-value pair, calling the block with (key, value), and collects all return values into an Array. 

Aliases: I<collect_kv>

=cut

=head2 count

    self.count(obj)

Returns 1 if the given key exists in the hash, 0 otherwise.  If a block is provided, counts the number of key-value pairs for which the block returns true.

=cut

=head2 count_by

    self.count_by(block)

Returns the count of key-value pairs for which the block returns a true value.

=cut

=head2 delete

    self.delete(*keys)

Removes the specified keys from the hash and returns the deleted values. 

Aliases: I<remove>

=cut

=head2 delete_if

    self.delete_if(block)

Deletes all key-value pairs for which the block returns true. The block receives (key, value) as arguments.  Returns the modified hash.

=cut

=head2 dig

    self.dig(key, *keys)

Recursively retrieves nested values.  Returns the value at the nested key path, or undef if any key in the path doesn't exist.

=cut

=head2 each

    self.each(block)

Iterates over each key-value pair in the hash, calling the block with (key, value). Returns the block when given, or the next (key, value) pair when called without arguments.

Aliases: I<each_kv>, I<each_pair>

=cut

=head2 each_k

    self.each_k(block)

Iterates over each key in the hash, calling the block with the key.  Returns the hash. 

Aliases: I<each_key>

=cut

=head2 each_v

    self.each_v(block)

Iterates over each value in the hash, calling the block with the value. Returns the hash.

Aliases: I<each_value>

=cut

=head2 fetch

    self.fetch(key, default)

Returns the value for the given key if it exists, otherwise returns the default value. 

=cut

=head2 flip

    self.flip

Returns a new hash with keys and values swapped.  The original values become keys and the original keys become values. 

Aliases: I<invert>, I<reverse>

=cut

=head2 get_pair

    self.get_pair(key)

Returns a Pair object containing the given key and its associated value.

=cut

=head2 get_pairs

    self.get_pairs(*keys)

Returns an Array of Pair objects for the specified keys.

=cut

=head2 grep

    self.grep(block)

Returns a new hash containing only the key-value pairs for which the block returns true.  The block receives (key, value) as arguments.

Aliases: I<grep_kv>, I<select>

=cut

=head2 grep_v

    self.grep_v(block)

Returns a new hash containing only the key-value pairs for which the block (called with value only) returns true.

Aliases: I<grep_val>

=cut

=head2 has

    self.has(key)

Returns true if the given key exists in the hash, false otherwise.

Aliases: I<exists>, I<has_key>, I<haskey>, I<contain>, I<include>, I<contains>, I<includes>

=cut

=head2 is_empty

    self.is_empty

Returns true if the hash contains no key-value pairs, false otherwise. 

=cut

=head2 item

    self.item(key)

Returns the value associated with the given key, or undef if the key doesn't exist. 

=cut

=head2 items

    self.items(*keys)

Returns an Array of values for the specified keys.  Returns undef for keys that don't exist. 

=cut

=head2 keys

    self.keys

Returns an Array containing all keys in the hash. 

=cut

=head2 kv

    self. kv

Returns an Array of Pair objects, where each Pair contains a key and its associated value. 

Aliases: I<to_a>, I<pairs>, I<to_array>

=cut

=head2 len

    self.len

Returns the number of key-value pairs in the hash. 

Aliases: I<size>, I<length>

=cut

=head2 lsel

    self.lsel(keys)

Performs linear selection:  returns a new hash with the specified keys.  Keys that don't exist in the original hash will have nil values. 

Aliases: I<linsel>, I<linear_selection>

=cut

=head2 map

    self.map(block)

Transforms the hash by calling the block with (key, value) for each pair. The block should return pairs of (new_key, new_value). Returns a new hash. 

Aliases: I<map_kv>

=cut

=head2 map_v

    self.map_v(block)

Returns a new hash with the same keys but with values transformed by the block.  The block receives (key, value) and should return the new value. 

Aliases: I<map_val>

=cut

=head2 max_by

    self. max_by(block)

Returns the key-value Pair for which the block returns the maximum value.  The block receives (key, value).

=cut

=head2 merge_values

    self.merge_values(obj)

Updates values in the hash for keys that also exist in obj. Only existing keys are affected. Modifies and returns the hash. 

=cut

=head2 min_by

    self.min_by(block)

Returns the key-value Pair for which the block returns the minimum value. The block receives (key, value).

=cut

=head2 new

    self.new

Creates and returns a new Hash object. 

Aliases: I<call>

=cut

=head2 same_keys

    self.same_keys(obj)

Returns true if the hash has exactly the same keys as the given object, false otherwise. 

=cut

=head2 set_keys

    self.set_keys(*keys)

Sets the specified keys with nil values and returns the hash. 

=cut

=head2 slice

    self.slice(*keys)

Returns a new hash containing only the specified keys and their values from the original hash. 

=cut

=head2 sort

    self.sort(block)

Returns an Array of Pairs sorted by keys.  If a block is provided, uses it as a comparison function for sorting keys.

=cut

=head2 sort_by

    self.sort_by(block)

Returns an Array of Pairs sorted by the values returned by the block.  The block receives (key, value).

=cut

=head2 to_bag

    self.to_bag

Converts the hash's keys to a Bag object. 

=cut

=head2 to_s

    self.to_s

Returns a string representation of the hash. 

Aliases: I<dump>, I<to_str>

=cut

=head2 to_set

    self.to_set

Converts the hash's keys to a Set object. 

=cut

=head2 values

    self.values

Returns an Array containing all values in the hash.

=cut

=encoding utf8

=head1 NAME

Sidef::Types::Set::Bag - Multiset (Bag) data type

=head1 DESCRIPTION

A C<Bag> is an unordered collection of elements that allows duplicate values.
Unlike a L<Sidef::Types::Set::Set>, a Bag keeps track of how many times each
element occurs.

In other words, a Bag is a I<multiset>. Each element has an associated
I<multiplicity> (frequency). Most set-like operations are supported, but they
take multiplicity into account.

For example, the Bag:

    Bag(1, 1, 2, 3)

contains the element C<1> twice, and C<2> and C<3> once.

=head1 SYNOPSIS

    var a = Bag(1, 1, 2, 3)
    var b = Bag(1, 3, 4)

    say a.len           # 4  (total number of elements)
    say a.elems         # 3  (number of distinct elements)

    say a.count(1)      # 2
    say a.keys          # [1, 2, 3]
    say a.freq          # [[1,2], [2,1], [3,1]]

    say a + b           # Bag(1,1,1,2,3,3,4)
    say a & b           # Bag(1,3)
    say a - b           # Bag(1,2)
    say a | b           # Bag(1,1,2,3,4)

=head1 INHERITS

This class inherits from:

=over 4

=item *

L<Sidef::Types::Set::Set>

=back

=head1 OPERATORS

The following operators are supported for Bag objects.

=over 4

=item C<a + b>

Returns the I<multiset sum> of C<a> and C<b>. All elements from both bags are
included, preserving their multiplicities.

Alias: C<concat>, C<union_all>

=item C<a & b>

Returns the I<intersection> of C<a> and C<b>.  
Each element appears the minimum number of times it occurs in both bags.

Alias: C<intersection>, C<and>, C<∩>

=item C<a | b>

Returns the I<union> of C<a> and C<b>.  
Each element appears the maximum number of times it occurs in either bag.

Alias: C<union>, C<∪>

=item C<a - b>

Returns the I<difference> of C<a> and C<b>.  
Elements from C<b> are removed from C<a> according to their multiplicities.

Alias: C<difference>, C<∖>

=item C<a ^ b>

Returns the I<symmetric difference> of C<a> and C<b>.

Alias: C<xor>

=item C<a << b>

Appends all elements from C<b> into C<a>.

Alias: C<append>, C<push>

=item C<a == b>

Returns true if both bags contain the same elements with the same
multiplicities.

Alias: C<eq>, C<≡>

=item C<a != b>

Returns true if the two bags are not equal.

Alias: C<ne>, C<≠>

=item C<a <= b>

Returns true if C<a> is a I<sub-bag> of C<b>, meaning that every element in
C<a> occurs no more times than in C<b>.

Alias: C<le>, C<⊆>

=item C<a >= b>

Returns true if C<a> is a I<super-bag> of C<b>.

Alias: C<ge>, C<⊇>

=item C<a ∋ x>

Returns true if element C<x> exists in C<a>.

Alias: C<contains>, C<has>

=item C<a ∌ x>

Returns true if element C<x> does not exist in C<a>.

Alias: C<not_contains>

=back

=head1 METHODS

=head2 add_kv(obj, count)

Adds C<count> occurrences of C<obj> to the bag.

Returns the bag itself.

=head2 add_kvs(*pairs)

Adds multiple C<(object, count)> pairs to the bag.

=head2 clone

Returns a shallow copy of the bag.

=head2 collect(block)

Applies C<block> to each element and returns a new Bag with the results.

=head2 contains_all(*objects)

Returns true if all listed objects exist in the bag (ignores multiplicity).

=head2 count(obj)

Returns the number of times C<obj> occurs in the bag.

Alias: C<get>

=head2 count_by(block)

Returns a new Bag that counts elements based on the value returned by
C<block>.

=head2 delete(*objects)

Deletes one occurrence of each listed object from the bag.

Alias: C<remove>

=head2 delete_all(*objects)

Deletes all occurrences of the listed objects from the bag.

=head2 delete_if(block)

Deletes all elements for which C<block> returns true.

=head2 elems

Returns the number of distinct elements in the bag.

=head2 freq

Returns an array of C<[key, count]> pairs.

=head2 keys

Returns an array of distinct elements in the bag.

=head2 len

Returns the total number of elements, including duplicates.

=head2 to_a

Returns an array containing all elements, including duplicates.

=head2 to_set

Converts the bag into a L<Sidef::Types::Set::Set>, discarding multiplicities.

=head2 to_bag

Returns the bag itself.

=head1 EXAMPLES

    var bag = Bag("a", "a", "b")

    bag.add_kv("c", 3)
    say bag.freq
    # [["a",2], ["b",1], ["c",3]]

    bag.delete("a")
    say bag.count("a")
    # 1

=head1 SEE ALSO

=over 4

=item *

L<Sidef::Types::Set::Set>

=item *

Multiset (Bag) data structure

=back

=cut

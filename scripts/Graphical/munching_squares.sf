#!/usr/bin/ruby

#
## http://rosettacode.org/wiki/Munching_squares
#

require 'GD';
 
var gd_img = 'GD::Image'.to_caller;
var img = gd_img.new(256, 256, 1);
 
range(0, 255).each { |y|
    range(0, 255).each { |x|
        var color = img.colorAllocate((255 - x - y).abs, (255-x)^y, x^(255-y));
        img.setPixel(x, y, color);
    }
}
 
if (var fh = %f(xor.png).open('>:raw')) {
    fh << img.png;
}
